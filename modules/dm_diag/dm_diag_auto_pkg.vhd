--! @file        dm_diag_auto_pkg.vhd
--  DesignUnit   dm_diag_auto
--! @author      M. Kreider <m.kreider@gsi.de>
--! @date        03/07/2018
--! @version     0.0.1
--! @copyright   2018 GSI Helmholtz Centre for Heavy Ion Research GmbH
--!

--! @brief AUTOGENERATED WISHBONE-SLAVE PACKAGE FOR dm_diag.vhd
--!
--------------------------------------------------------------------------------
--! This library is free software; you can redistribute it and/or
--! modify it under the terms of the GNU Lesser General Public
--! License as published by the Free Software Foundation; either
--! version 3 of the License, or (at your option) any later version.
--!
--! This library is distributed in the hope that it will be useful,
--! but WITHOUT ANY WARRANTY; without even the implied warranty of
--! MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
--! Lesser General Public License for more details.
--!
--! You should have received a copy of the GNU Lesser General Public
--! License along with this library. If not, see <http://www.gnu.org/licenses/>.
--------------------------------------------------------------------------------

-- ***********************************************************
-- ** WARNING - THIS IS AUTO-GENERATED CODE! DO NOT MODIFY! **
-- ***********************************************************
--
-- If you want to change the interface,
-- modify dm_diag.xml and re-run 'python wbgenplus.py dm_diag.xml' !

library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;
use work.wishbone_pkg.all;
use work.wbgenplus_pkg.all;
use work.genram_pkg.all;
package dm_diag_auto_pkg is

  constant c_reset_OWR                      : natural := 16#000#; -- wo,  1 b, Resets/clears the diagnostic
  constant c_enable_RW                      : natural := 16#004#; -- rw,  1 b, Enables/disables update. Default is enabled
  constant c_time_observation_interval_RW_1 : natural := 16#008#; -- rw, 32 b, TAI time observation interval in ns
  constant c_time_observation_interval_RW_0 : natural := 16#00c#; -- rw, 32 b, TAI time observation interval in ns
  constant c_time_dif_pos_GET_1             : natural := 16#010#; -- ro, 32 b, Observed max pos. ECA time difference in ns between ref clock ticks
  constant c_time_dif_pos_GET_0             : natural := 16#014#; -- ro, 32 b, Observed max pos. ECA time difference in ns between ref clock ticks
  constant c_time_dif_pos_ts_GET_1          : natural := 16#018#; -- ro, 32 b, (approximate) timestamp of last pos dif update
  constant c_time_dif_pos_ts_GET_0          : natural := 16#01c#; -- ro, 32 b, (approximate) timestamp of last pos dif update
  constant c_time_dif_neg_GET_1             : natural := 16#020#; -- ro, 32 b, Observed max neg. ECA time difference in ns between ref clock ticks
  constant c_time_dif_neg_GET_0             : natural := 16#024#; -- ro, 32 b, Observed max neg. ECA time difference in ns between ref clock ticks
  constant c_time_dif_neg_ts_GET_1          : natural := 16#028#; -- ro, 32 b, (approximate) timestamp of last neg dif update
  constant c_time_dif_neg_ts_GET_0          : natural := 16#02c#; -- ro, 32 b, (approximate) timestamp of last neg dif update
  constant c_stall_observation_interval_RW  : natural := 16#030#; -- rw, 32 b, Stall observation interval in cycles
  constant c_stall_stat_select_RW           : natural := 16#034#; -- rw,  8 b, Page selector register for Stall observers
  constant c_stall_streak_max_GET           : natural := 16#100#; -- ro, 32 b, Observed max continuous stall in cycles
  constant c_stall_cnt_GET                  : natural := 16#104#; -- ro, 32 b, Stall time within observation interval in cycles
  constant c_stall_max_ts_GET_1             : natural := 16#108#; -- ro, 32 b, Timestamp of last max update
  constant c_stall_max_ts_GET_0             : natural := 16#10c#; -- ro, 32 b, Timestamp of last max update

  --| Component ----------------------- dm_diag_auto ------------------------------------------|
  component dm_diag_auto is
  generic(
    g_cores : natural := 16 --CPU cores
  );
  Port(
    clk_ref_i                     : std_logic;                            -- Clock input for ref domain
    rst_ref_n_i                   : std_logic;                            -- Reset input (active low) for ref domain
    error_i                       : in  std_logic_vector(1-1 downto 0);   -- Error control
    stall_i                       : in  std_logic_vector(1-1 downto 0);   -- flow control
    stall_cnt_i                   : in  std_logic_vector(32-1 downto 0);  -- Stall time within observation interval in cycles
    stall_cnt_V_i                 : in  std_logic_vector(1-1 downto 0);   -- Valid flag - stall_cnt
    stall_max_ts_i                : in  std_logic_vector(64-1 downto 0);  -- Timestamp of last max update
    stall_max_ts_V_i              : in  std_logic_vector(1-1 downto 0);   -- Valid flag - stall_max_ts
    stall_streak_max_i            : in  std_logic_vector(32-1 downto 0);  -- Observed max continuous stall in cycles
    stall_streak_max_V_i          : in  std_logic_vector(1-1 downto 0);   -- Valid flag - stall_streak_max
    time_dif_neg_i                : in  std_logic_vector(64-1 downto 0);  -- Observed max neg. ECA time difference in ns between ref clock ticks
    time_dif_neg_V_i              : in  std_logic_vector(1-1 downto 0);   -- Valid flag - time_dif_neg
    time_dif_neg_ts_i             : in  std_logic_vector(64-1 downto 0);  -- (approximate) timestamp of last neg dif update
    time_dif_neg_ts_V_i           : in  std_logic_vector(1-1 downto 0);   -- Valid flag - time_dif_neg_ts
    time_dif_pos_i                : in  std_logic_vector(64-1 downto 0);  -- Observed max pos. ECA time difference in ns between ref clock ticks
    time_dif_pos_V_i              : in  std_logic_vector(1-1 downto 0);   -- Valid flag - time_dif_pos
    time_dif_pos_ts_i             : in  std_logic_vector(64-1 downto 0);  -- (approximate) timestamp of last pos dif update
    time_dif_pos_ts_V_i           : in  std_logic_vector(1-1 downto 0);   -- Valid flag - time_dif_pos_ts
    enable_o                      : out std_logic_vector(1-1 downto 0);   -- Enables/disables update. Default is enabled
    reset_o                       : out std_logic_vector(1-1 downto 0);   -- Resets/clears the diagnostic
    stall_observation_interval_o  : out std_logic_vector(32-1 downto 0);  -- Stall observation interval in cycles
    stall_stat_select_o           : out std_logic_vector(8-1 downto 0);   -- Page selector register for Stall observers
    stall_stat_select_RD_o        : out std_logic_vector(1-1 downto 0);   -- Read enable flag - stall_stat_select
    stall_stat_select_WR_o        : out std_logic_vector(1-1 downto 0);   -- Write enable flag - stall_stat_select
    time_observation_interval_o   : out std_logic_vector(64-1 downto 0);  -- TAI time observation interval in ns
    
    ctrl_i                        : in  t_wishbone_slave_in;
    ctrl_o                        : out t_wishbone_slave_out

    
  );
  end component;

  constant c_dm_diag_ctrl_sdb : t_sdb_device := (
  abi_class     => x"0000", -- undocumented device
  abi_ver_major => x"01",
  abi_ver_minor => x"00",
  wbd_endian    => c_sdb_endian_big,
  wbd_width     => x"7", -- 8/16/32-bit port granularity
  sdb_component => (
  addr_first    => x"0000000000000000",
  addr_last     => x"00000000000001ff",
  product => (
  vendor_id     => x"0000000000000651",
  device_id     => x"18060200",
  version       => x"00000001",
  date          => x"20180703",
  name          => "DM-Diagnostics     ")));

end dm_diag_auto_pkg;
package body dm_diag_auto_pkg is
end dm_diag_auto_pkg;
